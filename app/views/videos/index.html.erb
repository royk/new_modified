<% provide(:title, 'Videos') %>
<% content_for :javascript_includes do %>
	<%= javascript_include_tag "dataimporter.js" %>
<% end %>
<%= auto_discovery_link_tag(:atom, videos_path(:atom)) %>

<h1>Freestyle Videos</h1>
<% if signed_in? && current_user.admin? %>
	<div id="data-import" style="display:none;">
		<p>Data import:</p>
		<%= text_field_tag :data, nil, class: "post-input" %>
		<button class="btn" id="importButton">Send</button>
			<script>
				$("#importButton").click(function() {
					var elem = $("#data");
					var data = JSON.parse(elem.val());
					IM.videoImport(data);
				});
			</script>
	</div>
<% end %>
	<%= render 'shared/videos/search' %>
<% @videos.each do |feed_item| %>
	<% if feed_item.vendor=="youtube" %>
		<%= render 'shared/videos/small/youtube_video', :uid => feed_item.uid %>
	<% elsif feed_item.vendor=="vimeo" %>
		<%= render 'shared/videos/small/vimeo_video', :uid => feed_item.uid %>
	<% elsif feed_item.vendor=="footbagorg" %>
		<%= render 'shared/videos/small/footbagorg_video', :uid => feed_item.uid %>
	<% elsif feed_item.vendor=="jugglingtv" %>
		<%= render 'shared/videos/small/jugglingtv_video', :uid => feed_item.uid %>
	<% end %>
	<div style="display:inline;">Comment | Like</div>
<% end %>

<%= render 'shared/ajax_loading', collection: @videos, loadPath: '/videos/' %>

